/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={159:(t,e,r)=>{t.exports={RBTree:r(951),BinTree:r(158)}},158:(t,e,r)=>{var i=r(930);function o(t){this.data=t,this.left=null,this.right=null}function s(t){this._root=null,this._comparator=t,this.size=0}o.prototype.get_child=function(t){return t?this.right:this.left},o.prototype.set_child=function(t,e){t?this.right=e:this.left=e},s.prototype=new i,s.prototype.insert=function(t){if(null===this._root)return this._root=new o(t),this.size++,!0;for(var e=0,r=null,i=this._root;;){if(null===i)return i=new o(t),r.set_child(e,i),ret=!0,this.size++,!0;if(0===this._comparator(i.data,t))return!1;e=this._comparator(i.data,t)<0,r=i,i=i.get_child(e)}},s.prototype.remove=function(t){if(null===this._root)return!1;var e=new o(void 0),r=e;r.right=this._root;for(var i=null,s=null,n=1;null!==r.get_child(n);){i=r,r=r.get_child(n);var h=this._comparator(t,r.data);n=h>0,0===h&&(s=r)}return null!==s&&(s.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this._root=e.right,this.size--,!0)},t.exports=s},951:(t,e,r)=>{var i=r(930);function o(t){this.data=t,this.left=null,this.right=null,this.red=!0}function s(t){this._root=null,this._comparator=t,this.size=0}function n(t){return null!==t&&t.red}function h(t,e){var r=t.get_child(!e);return t.set_child(!e,r.get_child(e)),r.set_child(e,t),t.red=!0,r.red=!1,r}function l(t,e){return t.set_child(!e,h(t.get_child(!e),!e)),h(t,e)}o.prototype.get_child=function(t){return t?this.right:this.left},o.prototype.set_child=function(t,e){t?this.right=e:this.left=e},s.prototype=new i,s.prototype.insert=function(t){var e=!1;if(null===this._root)this._root=new o(t),e=!0,this.size++;else{var r=new o(void 0),i=0,s=0,a=null,c=r,u=null,f=this._root;for(c.right=this._root;;){if(null===f?(f=new o(t),u.set_child(i,f),e=!0,this.size++):n(f.left)&&n(f.right)&&(f.red=!0,f.left.red=!1,f.right.red=!1),n(f)&&n(u)){var p=c.right===a;f===u.get_child(s)?c.set_child(p,h(a,!s)):c.set_child(p,l(a,!s))}var d=this._comparator(f.data,t);if(0===d)break;s=i,i=d<0,null!==a&&(c=a),a=u,u=f,f=f.get_child(i)}this._root=r.right}return this._root.red=!1,e},s.prototype.remove=function(t){if(null===this._root)return!1;var e=new o(void 0),r=e;r.right=this._root;for(var i=null,s=null,a=null,c=1;null!==r.get_child(c);){var u=c;s=i,i=r,r=r.get_child(c);var f=this._comparator(t,r.data);if(c=f>0,0===f&&(a=r),!n(r)&&!n(r.get_child(c)))if(n(r.get_child(!c))){var p=h(r,c);i.set_child(u,p),i=p}else if(!n(r.get_child(!c))){var d=i.get_child(!u);if(null!==d)if(n(d.get_child(!u))||n(d.get_child(u))){var b=s.right===i;n(d.get_child(u))?s.set_child(b,l(i,u)):n(d.get_child(!u))&&s.set_child(b,h(i,u));var g=s.get_child(b);g.red=!0,r.red=!0,g.left.red=!1,g.right.red=!1}else i.red=!1,d.red=!0,r.red=!0}}return null!==a&&(a.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=e.right,null!==this._root&&(this._root.red=!1),null!==a},t.exports=s},930:t=>{function e(){}function r(t){this._tree=t,this._ancestors=[],this._cursor=null}e.prototype.clear=function(){this._root=null,this.size=0},e.prototype.find=function(t){for(var e=this._root;null!==e;){var r=this._comparator(t,e.data);if(0===r)return e.data;e=e.get_child(r>0)}return null},e.prototype.findIter=function(t){for(var e=this._root,r=this.iterator();null!==e;){var i=this._comparator(t,e.data);if(0===i)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(i>0)}return null},e.prototype.lowerBound=function(t){for(var e=this._root,r=this.iterator(),i=this._comparator;null!==e;){var o=i(t,e.data);if(0===o)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(o>0)}for(var s=r._ancestors.length-1;s>=0;--s)if(i(t,(e=r._ancestors[s]).data)<0)return r._cursor=e,r._ancestors.length=s,r;return r._ancestors.length=0,r},e.prototype.upperBound=function(t){for(var e=this.lowerBound(t),r=this._comparator;null!==e.data()&&0===r(e.data(),t);)e.next();return e},e.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},e.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},e.prototype.iterator=function(){return new r(this)},e.prototype.each=function(t){for(var e,r=this.iterator();null!==(e=r.next());)if(!1===t(e))return},e.prototype.reach=function(t){for(var e,r=this.iterator();null!==(e=r.prev());)if(!1===t(e))return},r.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},r.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},r.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},r.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},r.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t.exports=e},300:(t,e,r)=>{const{RBTree:i}=r(159);function o(){this.vertices=null,this.edges=null,this.cells=null}o.prototype.reset=function(){this.beachline=new i(((t,e)=>t.x-e.x)),this.circleEvents=new i(((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y)),this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},o.prototype.sqrt=Math.sqrt,o.prototype.abs=Math.abs,o.prototype.equalWithEpsilon=function(t,e){return this.abs(t-e)<1e-9},o.prototype.greaterThanWithEpsilon=function(t,e){return t-e>1e-9},o.prototype.lessThanWithEpsilon=function(t,e){return e-t>1e-9},o.prototype.RBTree=function(){this.root=null},o.prototype.RBTree.prototype.rbInsertSuccessor=function(t,e){let r,i,o;if(t){if(e.rbPrevious=t,e.rbNext=t.rbNext,t.rbNext&&(t.rbNext.rbPrevious=e),t.rbNext=e,t.rbRight){for(t=t.rbRight;t.rbLeft;)t=t.rbLeft;t.rbLeft=e}else t.rbRight=e;r=t}else this.root?(t=this.getFirst(this.root),e.rbPrevious=null,e.rbNext=t,t.rbPrevious=e,t.rbLeft=e,r=t):(e.rbPrevious=e.rbNext=null,this.root=e,r=null);for(e.rbLeft=e.rbRight=null,e.rbParent=r,e.rbRed=!0,t=e;r&&r.rbRed;)i=r.rbParent,r===i.rbLeft?(o=i.rbRight,o&&o.rbRed?(r.rbRed=o.rbRed=!1,i.rbRed=!0,t=i):(t===r.rbRight&&(this.rbRotateLeft(r),r=(t=r).rbParent),r.rbRed=!1,i.rbRed=!0,this.rbRotateRight(i))):(o=i.rbLeft,o&&o.rbRed?(r.rbRed=o.rbRed=!1,i.rbRed=!0,t=i):(t===r.rbLeft&&(this.rbRotateRight(r),r=(t=r).rbParent),r.rbRed=!1,i.rbRed=!0,this.rbRotateLeft(i))),r=t.rbParent;this.root.rbRed=!1},o.prototype.RBTree.prototype.rbRemoveNode=function(t){t.rbNext&&(t.rbNext.rbPrevious=t.rbPrevious),t.rbPrevious&&(t.rbPrevious.rbNext=t.rbNext),t.rbNext=t.rbPrevious=null;let e,r,i=t.rbParent,o=t.rbLeft,s=t.rbRight;if(e=o?s?this.getFirst(s):o:s,i?i.rbLeft===t?i.rbLeft=e:i.rbRight=e:this.root=e,o&&s?(r=e.rbRed,e.rbRed=t.rbRed,e.rbLeft=o,o.rbParent=e,e!==s?(i=e.rbParent,e.rbParent=t.rbParent,t=e.rbRight,i.rbLeft=t,e.rbRight=s,s.rbParent=e):(e.rbParent=i,i=e,t=e.rbRight)):(r=t.rbRed,t=e),t&&(t.rbParent=i),!r)if(t&&t.rbRed)t.rbRed=!1;else{var n;do{if(t===this.root)break;if(t===i.rbLeft){if((n=i.rbRight).rbRed&&(n.rbRed=!1,i.rbRed=!0,this.rbRotateLeft(i),n=i.rbRight),n.rbLeft&&n.rbLeft.rbRed||n.rbRight&&n.rbRight.rbRed){n.rbRight&&n.rbRight.rbRed||(n.rbLeft.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n),n=i.rbRight),n.rbRed=i.rbRed,i.rbRed=n.rbRight.rbRed=!1,this.rbRotateLeft(i),t=this.root;break}}else if((n=i.rbLeft).rbRed&&(n.rbRed=!1,i.rbRed=!0,this.rbRotateRight(i),n=i.rbLeft),n.rbLeft&&n.rbLeft.rbRed||n.rbRight&&n.rbRight.rbRed){n.rbLeft&&n.rbLeft.rbRed||(n.rbRight.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n),n=i.rbLeft),n.rbRed=i.rbRed,i.rbRed=n.rbLeft.rbRed=!1,this.rbRotateRight(i),t=this.root;break}n.rbRed=!0,t=i,i=i.rbParent}while(!t.rbRed);t&&(t.rbRed=!1)}},o.prototype.RBTree.prototype.rbRotateLeft=function(t){var e=t,r=t.rbRight,i=e.rbParent;i?i.rbLeft===e?i.rbLeft=r:i.rbRight=r:this.root=r,r.rbParent=i,e.rbParent=r,e.rbRight=r.rbLeft,e.rbRight&&(e.rbRight.rbParent=e),r.rbLeft=e},o.prototype.RBTree.prototype.rbRotateRight=function(t){var e=t,r=t.rbLeft,i=e.rbParent;i?i.rbLeft===e?i.rbLeft=r:i.rbRight=r:this.root=r,r.rbParent=i,e.rbParent=r,e.rbLeft=r.rbRight,e.rbLeft&&(e.rbLeft.rbParent=e),r.rbRight=e},o.prototype.RBTree.prototype.getFirst=function(t){for(;t.rbLeft;)t=t.rbLeft;return t},o.prototype.Diagram=function(t){this.site=t},o.prototype.Cell=function(t){this.site=t,this.halfedges=[]},o.prototype.Cell.prototype.init=function(t){return this.site=t,this.halfedges=[],this},o.prototype.createCell=function(t){return new this.Cell(t)},o.prototype.Cell.prototype.prepareHalfedges=function(){for(var t,e=this.halfedges,r=e.length;r--;)(t=e[r].edge).vb&&t.va||e.splice(r,1);return e.sort((function(t,e){return e.angle-t.angle})),e.length},o.prototype.Vertex=function(t,e){this.x=t,this.y=e},o.prototype.Edge=function(t,e){this.lSite=t,this.rSite=e,this.va=this.vb=null},o.prototype.Halfedge=function(t,e,r){if(this.site=e,this.edge=t,r)this.angle=Math.atan2(r.y-e.y,r.x-e.x);else{var i=t.va,o=t.vb;this.angle=t.lSite===e?Math.atan2(o.x-i.x,i.y-o.y):Math.atan2(i.x-o.x,o.y-i.y)}},o.prototype.createHalfedge=function(t,e,r){return new this.Halfedge(t,e,r)},o.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},o.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},o.prototype.createVertex=function(t,e){const r=new this.Vertex(t,e);return this.vertices.push(r),r},o.prototype.createEdge=function(t,e,r,i){const o=new this.Edge(t,e);return this.edges.push(o),r&&this.setEdgeStartpoint(o,t,e,r),i&&this.setEdgeEndpoint(o,t,e,i),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(o,t,e)),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(o,e,t)),o},o.prototype.createBorderEdge=function(t,e,r){var i=new this.Edge(t,null);return i.va=e,i.vb=r,this.edges.push(i),i},o.prototype.setEdgeStartpoint=function(t,e,r,i){t.va||t.vb?t.lSite===r?t.vb=i:t.va=i:(t.va=i,t.lSite=e,t.rSite=r)},o.prototype.setEdgeEndpoint=function(t,e,r,i){this.setEdgeStartpoint(t,r,e,i)},o.prototype.Beachsection=function(){},o.prototype.createBeachsection=function(t){var e=new this.Beachsection;return e.site=t,e},o.prototype.leftBreakPoint=function(t,e){var r=t.site,i=r.x,o=r.y,s=o-e;if(!s)return i;var n=t.rbPrevious;if(!n)return-1/0;var h=(r=n.site).x,l=r.y,a=l-e;if(!a)return h;var c=h-i,u=1/s-1/a,f=c/a;return u?(-f+this.sqrt(f*f-2*u*(c*c/(-2*a)-l+a/2+o-s/2)))/u+i:(i+h)/2},o.prototype.rightBreakPoint=function(t,e){var r=t.rbNext;if(r)return this.leftBreakPoint(r,e);var i=t.site;return i.y===e?i.x:1/0},o.prototype.detachBeachsection=function(t){this.detachCircleEvent(t),this.beachline.rbRemoveNode(t)},o.prototype.removeBeachsection=function(t){this.detachCircleEvent(t),this.beachline.remove(t)},o.prototype.addBeachsection=function(t){this.beachline.insert(t)},o.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null},o.prototype.attachCircleEvent=function(t){const e={arc:t,x:0,y:0};this.circleEvents.insert(e),(!this.firstCircleEvent||e.y<this.firstCircleEvent.y)&&(this.firstCircleEvent=e)},o.prototype.detachCircleEvent=function(t){t.circleEvent&&(this.circleEvents.remove(t.circleEvent),t.circleEvent=null)},o.prototype.connectEdge=function(t,e){var r=t.vb;if(r)return!0;var i,o,s=t.va,n=e.xl,h=e.xr,l=e.yt,a=e.yb,c=t.lSite,u=t.rSite,f=c.x,p=c.y,d=u.x,b=u.y,g=(f+d)/2,v=(p+b)/2;if(this.cells[c.voronoiId].closeMe=!0,this.cells[u.voronoiId].closeMe=!0,b!==p&&(o=v-(i=(f-d)/(b-p))*g),void 0===i){if(g<n||g>=h)return!1;if(f>d){if(!s||s.y<l)s=this.createVertex(g,l);else if(s.y>=a)return!1;r=this.createVertex(g,a)}else{if(!s||s.y>a)s=this.createVertex(g,a);else if(s.y<l)return!1;r=this.createVertex(g,l)}}else if(i<-1||i>1)if(f>d){if(!s||s.y<l)s=this.createVertex((l-o)/i,l);else if(s.y>=a)return!1;r=this.createVertex((a-o)/i,a)}else{if(!s||s.y>a)s=this.createVertex((a-o)/i,a);else if(s.y<l)return!1;r=this.createVertex((l-o)/i,l)}else if(p<b){if(!s||s.x<n)s=this.createVertex(n,i*n+o);else if(s.x>=h)return!1;r=this.createVertex(h,i*h+o)}else{if(!s||s.x>h)s=this.createVertex(h,i*h+o);else if(s.x<n)return!1;r=this.createVertex(n,i*n+o)}return t.va=s,t.vb=r,!0},o.prototype.clipEdge=function(t,e){var r=t.va.x,i=t.va.y,o=0,s=1,n=t.vb.x-r,h=t.vb.y-i,l=r-e.xl;if(0===n&&l<0)return!1;var a=-l/n;if(n<0){if(a<o)return!1;a<s&&(s=a)}else if(n>0){if(a>s)return!1;a>o&&(o=a)}if(l=e.xr-r,0===n&&l<0)return!1;if(a=l/n,n<0){if(a>s)return!1;a>o&&(o=a)}else if(n>0){if(a<o)return!1;a<s&&(s=a)}if(l=i-e.yt,0===h&&l<0)return!1;if(a=-l/h,h<0){if(a<o)return!1;a<s&&(s=a)}else if(h>0){if(a>s)return!1;a>o&&(o=a)}if(l=e.yb-i,0===h&&l<0)return!1;if(a=l/h,h<0){if(a>s)return!1;a>o&&(o=a)}else if(h>0){if(a<o)return!1;a<s&&(s=a)}return o>0&&(t.va=this.createVertex(r+o*n,i+o*h)),s<1&&(t.vb=this.createVertex(r+s*n,i+s*h)),(o>0||s<1)&&(this.cells[t.lSite.voronoiId].closeMe=!0,this.cells[t.rSite.voronoiId].closeMe=!0),!0},o.prototype.clipEdges=function(t){for(var e,r=this.edges,i=r.length,o=Math.abs;i--;)e=r[i],(!this.connectEdge(e,t)||!this.clipEdge(e,t)||o(e.va.x-e.vb.x)<1e-9&&o(e.va.y-e.vb.y)<1e-9)&&(e.va=e.vb=null,r.splice(i,1))},o.prototype.closeCells=function(t){for(var e,r,i,o,s,n,h,l,a,c=t.xl,u=t.xr,f=t.yt,p=t.yb,d=this.cells,b=d.length,g=Math.abs;b--;)if((e=d[b]).prepareHalfedges()&&e.closeMe){for(o=(i=e.halfedges).length,r=0;r<o;){if(n=i[r].getEndpoint(),l=i[(r+1)%o].getStartpoint(),g(n.x-l.x)>=1e-9||g(n.y-l.y)>=1e-9)switch(!0){case this.equalWithEpsilon(n.x,c)&&this.lessThanWithEpsilon(n.y,p):if(a=this.equalWithEpsilon(l.x,c),h=this.createVertex(c,a?l.y:p),s=this.createBorderEdge(e.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),o++,a)break;n=h;case this.equalWithEpsilon(n.y,p)&&this.lessThanWithEpsilon(n.x,u):if(a=this.equalWithEpsilon(l.y,p),h=this.createVertex(a?l.x:u,p),s=this.createBorderEdge(e.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),o++,a)break;n=h;case this.equalWithEpsilon(n.x,u)&&this.greaterThanWithEpsilon(n.y,f):if(a=this.equalWithEpsilon(l.x,u),h=this.createVertex(u,a?l.y:f),s=this.createBorderEdge(e.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),o++,a)break;n=h;case this.equalWithEpsilon(n.y,f)&&this.greaterThanWithEpsilon(n.x,c):if(a=this.equalWithEpsilon(l.y,f),h=this.createVertex(a?l.x:c,f),s=this.createBorderEdge(e.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),o++,a)break;if(n=h,a=this.equalWithEpsilon(l.x,c),h=this.createVertex(c,a?l.y:p),s=this.createBorderEdge(e.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),o++,a)break;if(n=h,a=this.equalWithEpsilon(l.y,p),h=this.createVertex(a?l.x:u,p),s=this.createBorderEdge(e.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),o++,a)break;if(n=h,a=this.equalWithEpsilon(l.x,u),h=this.createVertex(u,a?l.y:f),s=this.createBorderEdge(e.site,n,h),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),o++,a)break;default:throw"Voronoi.closeCells() > this makes no sense!"}r++}e.closeMe=!1}},o.prototype.dumpBeachline=function(t){if(console.log("Voronoi.dumpBeachline(%f) > Beachsections, from left to right:",t),this.beachline)for(var e=this.beachline.getFirst(this.beachline.root);e;)console.log("  site %d: xl: %f, xr: %f",e.site.voronoiId,this.leftBreakPoint(e,t),this.rightBreakPoint(e,t)),e=e.rbNext;else console.log("  None")},o.prototype.compute=function(t,e){this.reset();const r=t.slice().sort(((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y));let i=r.pop();for(;i;)this.addBeachsection(i),i=r.pop();return this.clipEdges(e),this.closeCells(e),{vertices:this.vertices,edges:this.edges,cells:this.cells}},t.exports=o}},e={};!function r(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}(300)})();